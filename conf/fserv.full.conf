# fserv-0.17
# The configuration file with all supported options and their default values.

# Server root directory.
# The parameter is required.
root "/usr/local/fserv"

pidfile "log/fserv.pid"

event_pool 64

# in ms.
timer_resolution 250

# Maximum file descriptor number that can be opened by the process. UNIX only.
# (=system default)
# max_fd_number 40

mod "log.log" {
	# hide | local | utc
	time local

	# in ms
	flush_delay 2000
}

log "log.log" {
	# Copy all data to standard output
	pass_to_std false

	# error | warn | info | debug
	level info

	# all, flow, net
	# debug_levels all

	/* debug gzip {
		file "log/debug.log.gz"
		buffer_size 4k

		# 1-9
		gzip_level 6

		# 1k-256k
		gzip_buffer_size 4k
	} */

	debug "file" {
		file "log/debug.log"

		# 0 - flush immediately
		buffer_size 4k
	}

	error_info "file" {
		file "log/error.log"
	}
}

mod "cache.mem" {
}

mod "net.listen" {
	# log "log.log" {
	# }

	max_clients 10000
}

mod "net.resolve" {
	# log "log.log" {
	# }

	# IP address of DNS server
	server "8.8.8.8"
	server "8.8.4.4"

	# Support response datagrams larger than 512 bytes.
	edns false

	# Response buffer size.  Minimum value is 512.
	buffer_size 512

	cache "cache.mem" {
		max_items 1000
	}

	# Resend query several times before giving up
	max_tries 3

	# Resend query if response is not received within this time (in milliseconds)
	retry_timeout 1000

	# Lookup IPv6 addresses
	ipv6 true
}

mod "net.connect" {
	# log "log.log" {
	# }

	max_connections 10000

	dns_resolver "net.resolve" {
	}
}
